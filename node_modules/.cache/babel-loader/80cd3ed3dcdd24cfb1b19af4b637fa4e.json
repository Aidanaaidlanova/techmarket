{"ast":null,"code":"var _jsxFileName = \"/home/clans/techmarket/src/components/Cart/Cart.js\";\nimport React, { Component } from \"react\";\nimport Title from \"../Title\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport CartColumns from \"./CartColumns\";\nimport CartList from \"./CartList\";\nimport CartTotals from \"./CartTotals\";\nimport { ProductConsumer } from \"../../context\";\nimport EmptyCart from \"./EmptyCart\";\nimport { ButtonContainer } from \"../pages/Button\";\nimport Header from '../header.js';\nimport Footer from '../footer.js';\nimport \"../styles/contact_responsive.css\";\nimport \"../styles/contact_styles.css\";\nimport \"../styles/blog_styles.css\";\nimport \"../styles/cart_styles.css\";\nimport \"../styles/bootstrap4/bootstrap.min.css\";\nimport \"../styles/cart_responsive.css\";\nimport { forEach } from \"react-bootstrap/utils/ElementChildren\";\nimport { createBrowserHistory } from 'history';\nconst history = createBrowserHistory();\n\nclass Store extends Component {\n  constructor() {\n    super();\n    this.state = {\n      choice: [],\n      productKeys: [],\n      countArray: [],\n      count: []\n    };\n  }\n\n  getFromStorage() {\n    if (localStorage.getItem(\"productKeys\") !== null) {\n      const productKeys = JSON.parse(localStorage.getItem(\"productKeys\"));\n      const productChoice = JSON.parse(localStorage.getItem(\"productChoice\"));\n      console.log(\"KEYS\", productKeys);\n      console.log(\"CHOICE\", productChoice);\n      this.setState({\n        productKeys: productKeys,\n        choice: productChoice\n      });\n    }\n  }\n\n  componentDidMount() {\n    this.getFromStorage();\n    console.log(this.state.choice);\n  }\n\n  componentWillMount() {\n    this.getFromStorage();\n  }\n\n  RemovefromBasket(e) {\n    const id = Number(e.target.id);\n    const local = JSON.parse(localStorage.getItem(\"productChoice\"));\n    localStorage.removeItem(\"productChoice\");\n    localStorage.removeItem(\"productKeys\");\n    console.log(\"Id\".id);\n    const productKeys = this.state.productKeys;\n    const allProduct = this.state.choice;\n    let newFilterArr = [];\n    let newLocal = [];\n    let newProductKeys = [];\n    newFilterArr = allProduct.filter(one => id != one.id);\n    newProductKeys = productKeys.filter(item => {\n      return id != item;\n    });\n    console.log(\"ITEM KEY\", newProductKeys);\n    console.log(\"iTEM\", allProduct);\n    localStorage.setItem(\"productChoice\", JSON.stringify(newFilterArr));\n    localStorage.setItem(\"productKeys\", JSON.stringify(newProductKeys));\n    this.getFromStorage();\n  }\n\n  isUnique(array, propertyName) {\n    let result = array.filter((e, i) => array.findIndex(a => a[propertyName] === e[propertyName]) === i);\n    this.setState({\n      count: result\n    });\n    localStorage.setItem(\"products\", JSON.stringify(result));\n    history.push('/order');\n    history.go('/order');\n  }\n\n  inputChange(e) {\n    const value = Number(e.target.value);\n    const id = Number(e.target.id);\n    const count = this.state.count;\n    const product = this.state.choice;\n\n    for (let i = 0; i < product.length; i++) {\n      if (id === product[i].id) {\n        count.push({\n          product: product[i].presence[0].id,\n          count: value\n        });\n      }\n    }\n\n    this.setState({\n      count: count\n    });\n    this.sumOfCount(e);\n  }\n\n  sumOfCount(e) {\n    let elem = document.getElementById(e.target.id).parentNode.parentNode.parentNode.parentNode;\n    let elem2 = elem.querySelectorAll('.cart_item_text_for_price');\n    this.state.choice.map((item, idx) => {\n      if (e.target.id == idx) {\n        elem2[0].innerText = Number(e.target.value) * Number(item.presence[0].price) + \" сом\";\n      }\n    });\n  }\n\n  render() {\n    return React.createElement(\"body\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"cart_section\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"col-lg-10 offset-lg-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"cart_container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"cart_title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430\"), this.state.choice && this.state.choice.length ? this.state.choice.map((product, idx) => {\n      return React.createElement(\"div\", {\n        class: \"cart_items\",\n        key: product.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        class: \"cart_list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        class: \"cart_item clearfix\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"cart_item_image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: product.photo[0] && product.photo[0].image,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"cart_item_info d-flex flex-md-row flex-column justify-content-between\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"cart_item_name cart_info_col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"cart_item_text cart_item_text_name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, product.name)), React.createElement(\"div\", {\n        class: \"cart_item_quantity cart_info_col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"cart_item_count\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"btn btn-black mx-1 plus \" + idx,\n        onChange: e => this.inputChange(e),\n        id: product.id,\n        type: \"number\",\n        name: product.name,\n        id: idx,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        class: \"cart_item_price cart_info_col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: product.id,\n        className: \" cart_item_text trash\",\n        onClick: e => this.RemovefromBasket(e),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        id: product.id,\n        className: \"fas fa-trash\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        class: \"cart_item_price cart_info_col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"cart_item_text cart_item_text_for_price\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, product.retail_price, \" \\u0441\\u043E\\u043C\"))))));\n    }) : React.createElement(\"p\", {\n      className: \"h2 text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, \"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430 \\u043F\\u043E\\u043A\\u0430 \\u043F\\u0443\\u0441\\u0442\\u0430\"), React.createElement(\"div\", {\n      class: \"cart_buttons\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      class: \"button cart_button_clear\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, \"\\u041D\\u0430\\u0437\\u0430\\u0434\")), React.createElement(\"button\", {\n      type: \"button\",\n      class: \"button cart_button_checkout\",\n      onClick: () => this.isUnique(this.state.count.reverse(), 'product'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, \"\\u041E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\"))))))), React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Store; // let elem = document.querySelectorAll(\".cart_items\");\n// let elems;\n// let anotherElems;\n// let className;\n// console.clear()\n// elem.forEach((item,idx) => {\n//   elems = item.getElementsByTagName('input');\n//   anotherElems = item.getElementsByClassName(\"cart_item_text cart_item_text_for_price\");\n//   className = elems[0].className;\n//   console.log('input ' + elems[0].value);\n//   console.log('class ' + className[className.length - 1], idx);\n//   console.log('div ' + anotherElems[0].innerHTML);\n//   console.log(anotherElems[0].innerHTML)\n//   if(className[className.length - 1] == idx) {\n//     console.log('sex');\n//   }\n// });\n// return elems;\n// (Number(anotherElems[0].innerText.replace(\" сом\",\"\")) * Number(elems[0].value))","map":{"version":3,"sources":["/home/clans/techmarket/src/components/Cart/Cart.js"],"names":["React","Component","Title","Link","withRouter","CartColumns","CartList","CartTotals","ProductConsumer","EmptyCart","ButtonContainer","Header","Footer","forEach","createBrowserHistory","history","Store","constructor","state","choice","productKeys","countArray","count","getFromStorage","localStorage","getItem","JSON","parse","productChoice","console","log","setState","componentDidMount","componentWillMount","RemovefromBasket","e","id","Number","target","local","removeItem","allProduct","newFilterArr","newLocal","newProductKeys","filter","one","item","setItem","stringify","isUnique","array","propertyName","result","i","findIndex","a","push","go","inputChange","value","product","length","presence","sumOfCount","elem","document","getElementById","parentNode","elem2","querySelectorAll","map","idx","innerText","price","render","photo","image","name","retail_price","reverse"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Title from \"../Title\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport CartColumns from \"./CartColumns\";\nimport CartList from \"./CartList\";\nimport CartTotals from \"./CartTotals\";\nimport { ProductConsumer } from \"../../context\";\nimport EmptyCart from \"./EmptyCart\";\nimport { ButtonContainer } from \"../pages/Button\";\nimport Header from '../header.js'; \nimport Footer from '../footer.js';\nimport \"../styles/contact_responsive.css\";\nimport \"../styles/contact_styles.css\";\nimport \"../styles/blog_styles.css\";\nimport \"../styles/cart_styles.css\";\nimport \"../styles/bootstrap4/bootstrap.min.css\";\nimport \"../styles/cart_responsive.css\";\nimport {forEach} from \"react-bootstrap/utils/ElementChildren\";\nimport { createBrowserHistory } from 'history';\nconst history = createBrowserHistory();\nclass Store extends Component {\n constructor() {\n    super();\n    this.state = {\n      choice: [],\n      productKeys: [],\n      countArray: [],\n      count: []\n    };\n }\n\n  getFromStorage() {\n    if(localStorage.getItem(\"productKeys\") !== null) {\n      const productKeys = JSON.parse(localStorage.getItem(\"productKeys\"));\n      const productChoice = JSON.parse(localStorage.getItem(\"productChoice\"));\n      console.log(\"KEYS\",productKeys);\n      console.log(\"CHOICE\",productChoice);\n      this.setState({\n        productKeys: productKeys,\n        choice: productChoice\n      })\n    }\n  }\n\n  componentDidMount(){\n   this.getFromStorage();\n   console.log(this.state.choice);\n  }\n\n  componentWillMount(){\n    this.getFromStorage();\n  }\n\n  RemovefromBasket(e) {\n    const id = Number(e.target.id);\n    const local = JSON.parse(localStorage.getItem(\"productChoice\"));\n    localStorage.removeItem(\"productChoice\");\n    localStorage.removeItem(\"productKeys\");\n    console.log(\"Id\". id);\n    const productKeys = this.state.productKeys;\n    const allProduct = this.state.choice;\n    let newFilterArr =  [];\n    let newLocal = [];\n    let newProductKeys = [];\n    newFilterArr = allProduct.filter(\n    one => id != one.id);\n\n    newProductKeys = productKeys.filter(item => {\n      return id != item;\n    });\n\n    console.log(\"ITEM KEY\",newProductKeys);\n    console.log(\"iTEM\", allProduct);\n    localStorage.setItem(\"productChoice\", JSON.stringify(newFilterArr));\n\n    localStorage.setItem(\"productKeys\", JSON.stringify(newProductKeys));\n    this.getFromStorage();\n  }\n\n  isUnique(array, propertyName) {\n   let result = array.filter((e, i) => array.findIndex(a => a[propertyName] === e[propertyName]) === i);\n   this.setState({\n     count: result,\n   });\n   localStorage.setItem(\"products\", JSON.stringify(result));\n    history.push('/order');\n    history.go('/order');\n  };\n\n  inputChange(e) {\n    const value = Number(e.target.value);\n    const id = Number(e.target.id);\n    const count = this.state.count;\n    const product = this.state.choice;\n    for(let i = 0; i < product.length; i++) {\n      if(id === product[i].id) {\n        count.push({\n          product: product[i].presence[0].id,\n          count: value\n        })\n      }\n    }\n    this.setState({\n      count: count,\n    })\n    this.sumOfCount(e);\n  }\n\n  sumOfCount(e) {\n    let elem = document.getElementById(e.target.id).parentNode.parentNode.parentNode.parentNode;\n    let elem2 = elem.querySelectorAll('.cart_item_text_for_price');\n    this.state.choice.map((item,idx) => {\n      if(e.target.id == idx) {\n        elem2[0].innerText = Number(e.target.value) * Number(item.presence[0].price) + \" сом\"\n      }\n    });\n  }\n\n  render() {\n\n  return (\n      <body>\n            <Header/>\n            <div class=\"cart_section\">\n            <div class=\"container\">\n              <div class=\"row\">\n                <div class=\"col-lg-10 offset-lg-1\">\n                  <div class=\"cart_container\">\n                    <div class=\"cart_title\">Корзина</div>\n\n\n                    {\n                      this.state.choice && this.state.choice.length ? this.state.choice.map((product,idx)=> {\n\n                          return (\n                            <div class=\"cart_items\" key={product.id}>\n                              <ul class=\"cart_list\">\n                                <li class=\"cart_item clearfix\">\n                                  <div class=\"cart_item_image\"><img src={product.photo[0] && product.photo[0].image }/></div>\n                                  <div class=\"cart_item_info d-flex flex-md-row flex-column justify-content-between\">\n                                    <div class=\"cart_item_name cart_info_col\">\n                                      <div class=\"cart_item_text cart_item_text_name\">{product.name}</div>\n                                    </div>\n\n\n                                    <div class=\"cart_item_quantity cart_info_col\">\n\n                                      <div class = \"cart_item_count\">\n\n                                        <div >\n                                          <input\n                                            className={\"btn btn-black mx-1 plus \" + idx}\n                                            onChange={e => this.inputChange(e)}\n                                            id={product.id}\n                                            type={\"number\"}\n                                            name={product.name}\n                                            id={idx}/>\n                                        </div>\n\n                                      </div>\n                                    </div>\n                                    <div class=\"cart_item_price cart_info_col\">\n                                      <div id={product.id} className=\" cart_item_text trash\" onClick={(e) => this.RemovefromBasket(e)}>\n                                        <i id={product.id} className=\"fas fa-trash\"/>\n                                      </div>\n                                    </div>\n                                    <div class=\"cart_item_price cart_info_col\">\n                                      <div class=\"cart_item_text cart_item_text_for_price\">{product.retail_price} сом</div>\n                                    </div>\n\n                                  </div>\n                                </li>\n                              </ul>\n                            </div>\n\n                          )}\n\n\n\n                      ) : <p className={\"h2 text-center\"}>Корзина пока пуста</p>\n\n\n                    }\n              <div class=\"cart_buttons\">\n               <Link to=\"/\" ><button type=\"button\" class=\"button cart_button_clear\">Назад</button></Link>\n                 <button type=\"button\"\n                         class=\"button cart_button_checkout\"\n                         onClick={() => this.isUnique(this.state.count.reverse(),'product')}>\n                   Оформить заказ\n                 </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n          <Footer/>\n      </body>\n    );\n  }\n}\n\nexport default Store;\n\n\n// let elem = document.querySelectorAll(\".cart_items\");\n// let elems;\n// let anotherElems;\n// let className;\n// console.clear()\n// elem.forEach((item,idx) => {\n//   elems = item.getElementsByTagName('input');\n//   anotherElems = item.getElementsByClassName(\"cart_item_text cart_item_text_for_price\");\n//   className = elems[0].className;\n//   console.log('input ' + elems[0].value);\n//   console.log('class ' + className[className.length - 1], idx);\n//   console.log('div ' + anotherElems[0].innerHTML);\n//   console.log(anotherElems[0].innerHTML)\n//   if(className[className.length - 1] == idx) {\n//     console.log('sex');\n//   }\n// });\n// return elems;\n// (Number(anotherElems[0].innerText.replace(\" сом\",\"\")) * Number(elems[0].value))\n"]},"metadata":{},"sourceType":"module"}