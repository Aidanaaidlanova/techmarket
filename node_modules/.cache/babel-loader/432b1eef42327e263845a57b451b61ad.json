{"ast":null,"code":"var _jsxFileName = \"/home/clans/techmarket/src/components/pages/search.js\";\nimport React, { Component } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport Product from \"../Product\";\nimport { ProductConsumer } from \"../../context\";\nimport styled from \"styled-components\";\nimport \"../styles/bootstrap4/bootstrap.min.css\";\nimport \"../styles/shop_styles.css\";\nimport \"../styles/shop_responsive.css\";\nimport Header from '../header.js';\nimport Footer from '../footer.js';\nimport axios from 'axios';\nimport { createBrowserHistory } from 'history';\nconst history = createBrowserHistory();\n\nclass Search extends Component {\n  constructor() {\n    super();\n    this.state = {\n      results: [],\n      loading: true\n    };\n    this.search = this.search.bind(this);\n  }\n\n  search() {\n    axios.get(\"http://46.101.236.211:8666/product/?search=\".concat(this.props.location.state)).then(response => {\n      this.setState({\n        results: response.data,\n        loading: false\n      });\n      console.log(this.state.results);\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  componentDidMount() {\n    this.search();\n  }\n\n  componentDidUpdate(nextProps) {\n    if (nextProps.location.state !== this.props.location.state) {\n      this.search();\n      console.log(\"Props\", nextProps.location.state);\n      console.log(\"StateProps\", this.props.location.state);\n    }\n  }\n\n  render() {\n    console.log(this.props.location.state);\n    return React.createElement(\"body\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"home\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"home_background parallax-window\",\n      \"data-parallax\": \"scroll\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"home_overlay\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"home_content d-flex flex-column align-items-center justify-content-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, this.state.results && this.state.results.map(product => {\n      return React.createElement(\"div\", {\n        class: \"product_item is_new\",\n        key: product.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"product_border\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        class: \"product_image d-flex flex-column align-items-center justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: product.photo[0] && product.photo[0].image,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"product_content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, product.presence && product && product.presence.map(presence => {\n        return React.createElement(\"div\", {\n          class: \"product_price\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        }, presence.price, \" \\u0441\\u043E\\u043C \");\n      }), React.createElement(\"div\", {\n        class: \"product_name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"#\",\n        tabindex: \"0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, product.name)))), React.createElement(\"div\", {\n        class: \"product_fv\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }), React.createElement(\"ul\", {\n        class: \"product_marks\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, product.presence.map(a => a.discount > 0 ? React.createElement(\"li\", {\n        className: \"product_mark product_discount\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, \"-\", product.presence[0].discount, \"%\") : \"\")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: () => {\n          history.push({\n            pathname: \"/details/\".concat(product.id, \"/\"),\n            state: {\n              proId: product.id\n            }\n          });\n          history.go(\"/details/\".concat(product.id, \"/\"));\n        },\n        class: \"button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, \"\\u041F\\u043E\\u0434\\u0440\\u043E\\u0431\\u043D\\u0435\\u0435\"))));\n    }))), React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default withRouter(Search);","map":{"version":3,"sources":["/home/clans/techmarket/src/components/pages/search.js"],"names":["React","Component","Link","withRouter","Product","ProductConsumer","styled","Header","Footer","axios","createBrowserHistory","history","Search","constructor","state","results","loading","search","bind","get","props","location","then","response","setState","data","console","log","catch","error","componentDidMount","componentDidUpdate","nextProps","render","map","product","id","photo","image","presence","price","name","a","discount","push","pathname","proId","go"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport {Link, withRouter} from \"react-router-dom\";\nimport Product from \"../Product\";\nimport {ProductConsumer} from \"../../context\";\nimport styled from \"styled-components\";\nimport \"../styles/bootstrap4/bootstrap.min.css\";\nimport \"../styles/shop_styles.css\";\nimport \"../styles/shop_responsive.css\";\nimport Header from '../header.js';\nimport Footer from '../footer.js';\nimport axios from 'axios';\nimport { createBrowserHistory } from 'history';\nconst history = createBrowserHistory();\n\nclass Search extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n\n      results:[],\n      loading: true\n\n    };\n\n    this.search = this.search.bind(this);\n\n  }\n\n  search() {\n    axios.get(`http://46.101.236.211:8666/product/?search=${this.props.location.state}`)\n      .then(response => {\n        this.setState({results: response.data, loading: false});\n        console.log(this.state.results);\n      })\n      .catch(error => {\n        console.log(error);\n      })\n  }\n\n  componentDidMount(){\n    this.search();\n\n  };\n\n  componentDidUpdate(nextProps) {\n    if(nextProps.location.state !== this.props.location.state)\n    {\n      this.search();\n      console.log(\"Props\", nextProps.location.state);\n      console.log(\"StateProps\", this.props.location.state);\n    }\n\n  }\n\n\n  render() {\n    console.log(this.props.location.state);\n    return (\n      <body>\n      <React.Fragment>\n\n        <Header/>\n        <div class=\"home\">\n          <div class=\"home_background parallax-window\" data-parallax=\"scroll\"></div>\n          <div class=\"home_overlay\"></div>\n          <div class=\"home_content d-flex flex-column align-items-center justify-content-center\">\n\n          </div>\n        </div>\n\n        <div className=\"container\">\n          <div className=\"row\">\n            {\n              this.state.results && this.state.results.map((product)=> {\n                return (\n                  <div class=\"product_item is_new\" key={product.id} >\n                    <div class=\"product_border\"></div>\n                    <div class=\"product_image d-flex flex-column align-items-center justify-content-center\">\n\n                      <img src={product.photo[0] && product.photo[0].image } />\n                    </div>\n                    <div class=\"product_content\">{product.presence &&  product && product.presence.map((presence) =>{\n                      return(\n                        <div class=\"product_price\">{presence.price} сом </div>\n                      )})}\n                      <div class=\"product_name\"><div><a href=\"#\" tabindex=\"0\">{product.name}</a></div></div>\n                    </div>\n                    <div class=\"product_fv\"></div>\n                    <ul class=\"product_marks\">\n                      {product.presence.map(a=>a.discount > 0 ? <li className=\"product_mark product_discount\">-{product.presence[0].discount}%</li> : \"\")}\n\n                    </ul>\n\n                    <div>\n                      <button onClick ={() => {history.push({pathname:`/details/${product.id}/`,state: {proId: product.id}});\n                        history.go(`/details/${product.id}/`)}} class=\"button\"><a href=\"\">Подробнее</a></button>\n                    </div>\n                  </div>\n\n\n\n\n                )}\n\n\n\n              )\n\n\n            }\n\n          </div>\n        </div>\n\n\n\n        <Footer/>\n      </React.Fragment>\n      </body>\n    )}\n\n}\n\n\nexport default withRouter(Search); "]},"metadata":{},"sourceType":"module"}